<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Dashboard Production Simpact</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Outfit', sans-serif; background: #222; color: white; padding: 2rem; }
        .order-card { background: #333; padding: 1.5rem; margin-bottom: 1rem; border-radius: 8px; border-left: 5px solid #555; display: flex; justify-content: space-between; align-items: center; }
        .order-card.urgent { border-left-color: #ff4444; background: #3a2a2a; }
        .btn { padding: 0.5rem 1rem; border: none; border-radius: 4px; cursor: pointer; margin-left: 0.5rem; }
        .btn-done { background: #4CAF50; color: white; }
        .btn-trash { background: #ff4444; color: white; }
    </style>
</head>
<body>
    <h1>ðŸ“¦ File d'attente Production</h1>
    <div id="orders-list"></div>
    <script>
        function loadOrders() {
            const list = document.getElementById('orders-list');
            const orders = JSON.parse(localStorage.getItem('orders') || '[]');
            
            if(orders.length === 0) {
                list.innerHTML = '<p style="color:#aaa">Aucune commande en attente.</p>';
                return;
            }

            list.innerHTML = orders.map((o, idx) => `
                <div class="order-card ${o.urgency >= 5 ? 'urgent' : ''}">
                    <div>
                        <strong>${o.id}</strong> - ${o.client_name}<br>
                        ${o.productName} (${o.quantity} ex)<br>
                        <small>${o.config}</small>
                        ${o.urgency >= 5 ? '<br><span style="color:#ff4444">ðŸ”¥ URGENT</span>' : ''}
                    </div>
                    <div>
                        <button class="btn btn-done" onclick="finishOrder(${idx})">âœ… Terminer</button>
                    </div>
                </div>
            `).join('');
        }

        function finishOrder(idx) {
            let orders = JSON.parse(localStorage.getItem('orders') || '[]');
            if(confirm('Terminer cette commande ?')) {
                orders.splice(idx, 1);
                localStorage.setItem('orders', JSON.stringify(orders));
                loadOrders();
            }
        }
        // RafraÃ®chir toutes les 5 secondes
        setInterval(loadOrders, 5000);
        loadOrders();
    </script>
</body>
</html>
